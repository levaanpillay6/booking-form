<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Newlands Sai Centre Booking</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #fff5f5, #ffeaea);
  min-height: 100vh;
  padding: 40px 15px;
}

.container {
  background: #fff;
  padding: 35px;
  border-radius: 20px;
  box-shadow: 0 15px 35px rgba(0,0,0,0.08);
  max-width: 520px;
  margin: auto;
}

.logo {
  width: 90px;
  display: block;
  margin: auto;
  padding: 8px;
  border-radius: 50%;
  border: 4px solid #d4af37;
  box-shadow: 0 0 10px rgba(212,175,55,0.6);
}

.motto {
  text-align: center;
  color: #d4af37;
  font-weight: 600;
  margin-top: 8px;
  letter-spacing: 1px;
}

h1 {
  text-align: center;
  color: #8b0000;
  margin-bottom: 5px;
}

h2 {
  text-align: center;
  font-size: 14px;
  color: #666;
  margin-bottom: 25px;
}

label {
  font-weight: 600;
  font-size: 13px;
  display: block;
  margin-top: 14px;
}

input, select {
  width: 100%;
  padding: 11px;
  margin-top: 6px;
  border-radius: 10px;
  border: 1px solid #ddd;
  font-size: 14px;
}

.time-row {
  display: flex;
  gap: 10px;
}

.checkbox-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 18px;
}

button {
  margin-top: 25px;
  width: 100%;
  padding: 13px;
  background: #8b0000;
  color: #fff;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  cursor: pointer;
}

button:hover {
  background: #b30000;
}

.note {
  display: none;
}

.success {
  text-align: center;
  color: green;
  font-weight: bold;
  margin-bottom: 15px;
}

.calendar-section {
  max-width: 900px;
  margin: 50px auto 0;
  background: #fff;
  padding: 25px;
  border-radius: 20px;
  box-shadow: 0 15px 35px rgba(0,0,0,0.08);
}

.calendar-section h2 {
  text-align: center;
  color: #8b0000;
}
</style>
</head>

<body>

<div class="container" id="formSection">
  <img src="sai-logo.png" class="logo" alt="Sai Logo">
  <div class="motto">Love All Serve All</div>
  <h1>Aum Sai Ram</h1>
  <h2>Newlands Sai Centre Booking Form</h2>

  <form id="bookingForm">
    <label>Convenor Name</label>
    <input id="name" required>

    <label>Contact Number</label>
    <input id="number" pattern="[0-9]{10}" placeholder="0821234567" required>

    <label>Email</label>
    <input type="email" id="email" required>

    <label>Wing</label>
    <select id="wing" required>
      <option value="">Select Wing</option>
      <option>Education</option>
      <option>Devotional</option>
      <option>Seva</option>
      <option>Ladies</option>
      <option>Youth</option>
    </select>

    <label>Event Name</label>
    <input id="event" required>

    <label>Date</label>
    <input type="date" id="date" required>

    <label>Time</label>
    <div class="time-row">
      <input type="time" id="from" required>
      <input type="time" id="to" required>
    </div>

    <div class="checkbox-row">
      <input type="checkbox" id="sound">
      <label for="sound">Sound System Required</label>
    </div>

    <button type="submit">Submit Booking</button>
  </form>
</div>

<div class="container note" id="noteSection">
  <div class="success">Booking confirmed and added to the calendar.</div>
  <ul>
    <li>Switch off sound & lights</li>
    <li>Close windows</li>
    <li>Lock all rooms & toilets</li>
    <li>Dispose of rubbish</li>
    <li>Activate alarm & close gate</li>
  </ul>
</div>

<section class="calendar-section">
  <h2>Temple Public Booking Calendar</h2>
  <iframe
    src="https://calendar.google.com/calendar/embed?src=d0b27a8ee6060ac4daf3565dd5bd9a81fdc51e4b8df433bd81bad1372fad9991@group.calendar.google.com&ctz=Africa%2FJohannesburg"
    width="100%" height="600" frameborder="0">
  </iframe>
</section>

  <script>
const form = document.getElementById("bookingForm");

form.addEventListener("submit", async e => {
  e.preventDefault();

  try {
    const data = {
      name: name.value,
      number: number.value,
      email: email.value,
      wing: wing.value,
      event: event.value,
      date: date.value,
      from: from.value,
      to: to.value,
      sound: sound.checked ? "Yes" : "No"
    };

    const res = await fetch(
      "https://script.google.com/macros/s/AKfycbwJWqAlLh416ivy8YoNzra1VweFOGdKoZrZu4bbOlrSjLsfhMEACd1xciCshMsqKRqBAg/exec",
      {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      }
    );

    const result = await res.json();

    if (result.status === "conflict") {
      alert("⚠️ This time slot is already booked.");
      return;
    }

    if (result.status === "success") {
      formSection.style.display = "none";
      noteSection.style.display = "block";
    } else {
      alert("❌ Error: " + result.message);
    }

  } catch (err) {
    alert("❌ Submission failed. Please try again.");
    console.error(err);
  }
});
</script>


</body>
</html>
